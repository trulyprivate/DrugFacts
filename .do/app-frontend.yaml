name: drugfacts-frontend
region: nyc
features:
  - buildpack-stack=ubuntu-22

static_sites:
  - name: frontend
    environment_slug: node-js
    github:
      repo: trulyprivate/DrugFacts
      branch: main
      deploy_on_push: true
    build_command: npm ci && npm run build && npm run export
    output_dir: out
    source_dir: /
    catchall_document: 404.html
    error_document: 404.html
    envs:
      - key: NODE_ENV
        value: production
        scope: BUILD_TIME
      - key: NEXT_PUBLIC_API_URL
        value: https://drugfacts-backend.ondigitalocean.app/api
        scope: BUILD_TIME